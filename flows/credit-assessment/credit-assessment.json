{
  "name": "credit-assessment",
  "transitionRoutes": [
    {
      "intent": "welcome",
      "condition": "$session.params.resetContexts == true",
      "targetFlow": "credit-assessment"
    },
    {
      "intent": "credit-assessment",
      "targetFlow": "credit-assessment"
    }
  ],
  "events": [
    {
      "name": "welcome",
      "transition": {
        "target": "credit-assessment",
        "condition": "$session.params.resetContexts == true"
      }
    }
  ],
  "states": [
    {
      "name": "welcome",
      "entryFulfillment": {
        "messages": [
          {
            "text": {
              "text": [
                "Welcome to the Credit Assessment Bot. How can I assist you today?"
              ]
            }
          }
        ]
      },
      "transitions": [
        {
          "nextPage": "personal-information"
        }
      ]
    },
    {
      "name": "personal-information",
      "entryFulfillment": {
        "messages": [
          {
            "text": {
              "text": [
                "Sure, I can help you with the credit assessment. Please provide the following personal information:"
              ]
            }
          }
        ]
      },
      "transitions": [
        {
          "nextPage": "contact-information"
        }
      ],
      "form": {
        "parameters": [
          {
            "displayName": "First Name",
            "entityType": "@sys.person",
            "required": true
          },
          {
            "displayName": "Last Name",
            "entityType": "@sys.person",
            "required": true
          },
          {
            "displayName": "Phone Number",
            "entityType": "@sys.phone-number",
            "required": true
          },
          {
            "displayName": "Date of Birth",
            "entityType": "@sys.date",
            "required": true
          },
          {
            "displayName": "Nationality",
            "entityType": "@sys.location",
            "required": true
          }
        ],
        "webhookState": {
          "webhook": "https://webhook.site/dfef2512-28ed-40e4-b662-891cc64262da",
          "headers": {
            "Content-Type": "application/json"
          }
        }
      }
    },
    {
      "name": "contact-information",
      "entryFulfillment": {
        "messages": [
          {
            "text": {
              "text": [
                "Thank you for providing your personal information. We will now proceed with the credit assessment."
              ]
            }
          }
        ]
      },
      "transitions": [
        {
          "nextPage": "credit-score"
        }
      ]
    },
    {
      "name": "credit-score",
      "entryFulfillment": {
        "messages": [
          {
            "text": {
              "text": [
                "Based on the information provided, your credit score is {{parameters.Credit Score}}"
              ]
            }
          }
        ]
      },
      "endFlow": true
    }
  ]
}